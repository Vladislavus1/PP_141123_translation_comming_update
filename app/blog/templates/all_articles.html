{% extends 'base.html' %}

{% block title %}
All articles
{% endblock %}

{% block content %}

<!--<div id="sticky-element">-->
<!--  <ul class="nav nav-pills nav-fill gap-2 p-1 small bg-dark rounded-5 shadow-sm" id="pillNav2" role="tablist" style="&#45;&#45;bs-nav-link-color: var(&#45;&#45;bs-white); &#45;&#45;bs-nav-pills-link-active-color: var(&#45;&#45;bs-primary); &#45;&#45;bs-nav-pills-link-active-bg: var(&#45;&#45;bs-white); border-radius: 5px;">-->
<!--    <li class="nav-item" role="presentation">-->
<!--      <a href="#all_articles_section" class="nav-link active rounded-5">All</a>-->
<!--    </li>-->
<!--    <li class="nav-item" role="presentation">-->
<!--      <a href="#articles_you_like_section" class="nav-link rounded-5">You like</a>-->
<!--    </li>-->
<!--    <li class="nav-item" role="presentation">-->
<!--      <a href="#new_articles_section" class="nav-link rounded-5">New</a>-->
<!--    </li>-->
<!--  </ul>-->
<!--</div>-->
<!--<br>-->
<!--<br>-->

<div class="sidebar">
  <a href="#all_articles" onclick="scrollToElement('all_articles_section')">All articles</a>
  <a href="#articles_you_might_like" onclick="scrollToElement('articles_you_like_section')">Articles you might like</a>
  <a href="#new_articles" onclick="scrollToElement('new_articles_section')">New article</a>
</div>

<div class="articles">
  <div id="all_articles_section">
    <h3 class="display-4 text-center">All articles</h3>
    {% for article in all_articles %}
        <div class="card mx-auto mb-3" style="border-radius: 15px; max-width: 820px;">
          <div class="card-body">
            <p class="card-text text-dark">
              <a href="/profile/{{ article.user_id_number }}" style="text-decoration: none;">
                <img src="{{ article.author.profile_picture }}" style="border-radius: 120px; height: 50px; width: 50px;">    {{ article.author }}
              </a>
              <small class="text-muted">{{ article.published_date }}</small>
            </p>
            <h4 class="card-title text-center">{{ article.title }}</h4>
            <div class="text-center">
              <img src="{{ article.picture_url }}" class="img-fluid rounded" style="max-height: 500px;">
            </div>
            <div class="text-center mt-3">
              <a href="/article/{{ article.id }}" class="btn btn-outline-dark">Read more</a>
            </div>
          </div>
        </div>

    {% endfor %}
  </div>
  <div id="articles_you_like_section">
    <h3 class="display-4 text-center">Articles you might like</h3>
    {% for article in articles_you_like %}
        <div class="card mx-auto mb-3" style="border-radius: 15px; max-width: 820px;">
          <div class="card-body">
            <p class="card-text text-dark">
              <a href="/profile/{{ article.user_id_number }}" style="text-decoration: none;">
                <img src="{{ article.author.profile_picture }}" style="border-radius: 120px; height: 50px; width: 50px;">    {{ article.author }}
              </a>
              <small class="text-muted">{{ article.published_date }}</small>
            </p>
            <h4 class="card-title text-center">{{ article.title }}</h4>
            <div class="text-center">
              <img src="{{ article.picture_url }}" class="img-fluid rounded" style="max-height: 500px;">
            </div>
            <div class="text-center mt-3">
              <a href="/article/{{ article.id }}" class="btn btn-outline-dark">Read more</a>
            </div>
          </div>
        </div>

    {% endfor %}
  </div>
  <div id="new_articles_section">
    <h3 class="display-4 text-center">New Articles</h3>
    {% for article in new_articles %}
        <div class="card mx-auto mb-3" style="border-radius: 15px; max-width: 820px;">
          <div class="card-body">
            <p class="card-text text-dark">
              <a href="/profile/{{ article.user_id_number }}" style="text-decoration: none;">
                <img src="{{ article.author.profile_picture }}" style="border-radius: 120px; height: 50px; width: 50px;">    {{ article.author }}
              </a>
              <small class="text-muted">{{ article.published_date }}</small>
            </p>
            <h4 class="card-title text-center">{{ article.title }}</h4>
            <div class="text-center">
              <img src="{{ article.picture_url }}" class="img-fluid rounded" style="max-height: 500px;">
            </div>
            <div class="text-center mt-3">
              <a href="/article/{{ article.id }}" class="btn btn-outline-dark">Read more</a>
            </div>
          </div>
        </div>

    {% endfor %}
  </div>
</div>

<style>
.sidebar {
  margin: 0;
  padding: 0;
  width: 200px;
  background-color: #f1f1f1;
  border-radius: 15px;
  position: fixed;
  height: 168px;
  top: 50%;
  transform: translateY(-50%); /* Перемещаем панель по вертикали на половину своей высоты */
  z-index: 5000; /* Отображение над навигационной панелью */
}

/* Sidebar links */
.sidebar a {
  display: block;
  color: black;
  padding: 16px;
  text-decoration: none;
}

/* Active/current link */
.sidebar a.active {
  background-color: #04AA6D;
  border-radius: 15px;
  color: white;
}

/* Links on mouse-over */
.sidebar a:hover:not(.active) {
  background-color: #555;
  border-radius: 15px;
  color: white;
}


/* Page content. The value of the margin-left property should match the value of the sidebar's width property */
div.content {
  margin-left: 240px; /* Увеличиваем значение на ширину боковой панели + небольшой отступ */
  padding: 1px 16px;
  height: 1000px;
}

</style>
<script>
function scrollToElement(elementId) {
  const element = document.getElementById(elementId);
  if (element) {
    element.scrollIntoView({ behavior: "smooth" }); // Прокрутка с плавным эффектом
  }
}
</script>
{% endblock %}